<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Mind Map üç≥</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-top">
                <div class="logo">
                    <span class="logo-icon">üç≥</span>
                    <h1>Recipe Mind Map</h1>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="app.showAddIngredient()">
                        <span>‚ûï</span> Dodaj sk≈Çadnik
                    </button>
                    <button class="btn btn-primary" onclick="app.showAddRecipe()">
                        <span>‚ûï</span> Nowy przepis
                    </button>
                </div>
            </div>
            
            <div class="filters">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchInput" placeholder="Szukaj przepis√≥w lub sk≈Çadnik√≥w..." oninput="app.filterRecipes()">
                </div>
                <select id="categoryFilter" onchange="app.filterRecipes()" class="filter-select">
                    <option value="all">Wszystkie kategorie</option>
                </select>
                <select id="tagFilter" onchange="app.filterRecipes()" class="filter-select">
                    <option value="all">Wszystkie tagi</option>
                </select>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container main-content">
        <div id="recipesGrid" class="recipes-grid"></div>
        
        <!-- Ingredient Database -->
        <div class="ingredient-database">
            <h2>üì¶ Baza sk≈Çadnik√≥w (<span id="ingredientCount">0</span> pozycji)</h2>
            <div id="ingredientsList" class="ingredients-list"></div>
        </div>
    </main>

    <!-- Recipe Modal -->
    <div id="recipeModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="modalTitle">Nowy przepis</h2>
                <button class="close-btn" onclick="app.closeRecipeModal()">‚úï</button>
            </div>
            
            <div class="modal-body">
                <div class="form-group">
                    <label>Nazwa przepisu</label>
                    <input type="text" id="recipeName" placeholder="np. Tradycyjna Carbonara">
                </div>

                <div class="form-group">
                    <label>Kategorie</label>
                    <div class="input-with-button">
                        <input type="text" id="categoryInput" placeholder="Dodaj kategoriƒô (Enter)" onkeypress="if(event.key==='Enter') app.addCategory()">
                        <button class="btn btn-small" onclick="app.addCategory()">Dodaj</button>
                    </div>
                    <div id="categoriesList" class="tags-container"></div>
                </div>

                <div class="form-group">
                    <label>Tagi</label>
                    <div class="input-with-button">
                        <input type="text" id="tagInput" placeholder="Dodaj tag (Enter)" onkeypress="if(event.key==='Enter') app.addTag()">
                        <button class="btn btn-small" onclick="app.addTag()">Dodaj</button>
                    </div>
                    <div id="tagsList" class="tags-container"></div>
                </div>

                <div class="form-group">
                    <label>Sk≈Çadniki</label>
                    <div class="ingredient-input">
                        <select id="ingredientSelect" class="flex-1">
                            <option value="">Wybierz sk≈Çadnik</option>
                        </select>
                        <input type="number" id="ingredientAmount" placeholder="Ilo≈õƒá" class="ingredient-amount">
                        <select id="ingredientUnit" class="ingredient-unit">
                            <option value="g">g</option>
                            <option value="ml">ml</option>
                        </select>
                        <button class="btn btn-small" onclick="app.addIngredient()">+</button>
                    </div>
                    <div id="ingredientItems" class="ingredient-items"></div>
                    <div id="totalCalories" class="total-calories"></div>
                </div>

                <div class="form-group">
                    <label>Przygotowanie</label>
                    <div id="stepsList" class="steps-list"></div>
                    <button class="btn-link" onclick="app.addStep()">‚ûï Dodaj krok</button>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="app.closeRecipeModal()">Anuluj</button>
                <button class="btn btn-primary" onclick="app.saveRecipe()">üíæ Zapisz przepis</button>
            </div>
        </div>
    </div>

    <!-- Ingredient Modal -->
    <div id="ingredientModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Dodaj sk≈Çadnik do bazy</h2>
                <button class="close-btn" onclick="app.closeIngredientModal()">‚úï</button>
            </div>
            
            <div class="modal-body">
                <div class="form-group">
                    <label>Nazwa sk≈Çadnika</label>
                    <input type="text" id="newIngredientName" placeholder="np. parmezan">
                </div>
                <div class="form-group">
                    <label>Kalorie na 100g/100ml</label>
                    <input type="number" id="newIngredientKcal" placeholder="np. 431">
                </div>
                <div class="form-group">
                    <label>Typ jednostki</label>
                    <select id="newIngredientUnit">
                        <option value="100g">100g (sta≈Çe)</option>
                        <option value="100ml">100ml (p≈Çynne)</option>
                    </select>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="app.closeIngredientModal()">Anuluj</button>
                <button class="btn btn-primary" onclick="app.saveIngredient()">Dodaj sk≈Çadnik</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="ingredients.js"></script>
    <script src="app.js"></script>
</body>
</html>
